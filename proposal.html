<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Refi Proposal</title>
  <style>
    :root {
      --mainCellColor: #363636;
      --cellBackground: #f3f3f3;
      --cellSecondColor: #e5ecfb;
      --brandFontColor: #41a100;
      --mainFontColor: #222;
    }
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      color: var(--mainFontColor);
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 820px;
      margin: 38px auto 28px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 24px #0002;
      padding: 32px 32px 24px 32px;
    }
    .top-block {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }
    .logo-block img {
      max-height: 60px;
      background: #fff;
      border-radius: 7px;
      margin-right: 15px;
    }
    .lo-card {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      font-size: 0.96em;
    }
    .lo-card .lo-photo {
      width: 54px;
      height: 54px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--brandFontColor);
      background: #eee;
      margin-bottom: 5px;
    }
    .lo-card .lo-info .name {
      font-weight: bold;
      color: var(--brandFontColor);
      font-size: 1.06em;
    }
    .company {
      font-size: 1.15em;
      font-weight: bold;
      color: var(--brandFontColor);
      margin: 10px 0 8px 0;
    }
    .greeting {
      margin: 24px 0 12px 0;
      font-size: 1.13em;
      color: var(--brandFontColor);
      font-weight: bold;
    }
    .big-title {
      margin: 32px 0 15px 0;
      color: var(--brandFontColor);
      font-size: 1.22em;
      font-weight: bold;
      letter-spacing: 0.3px;
      text-transform: uppercase;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 18px 0 14px 0;
      background: #fff;
      font-size: 0.97em;
    }
    th, td {
      border: 1px solid #bbb;
      padding: 8px 10px;
      text-align: left;
    }
    th.maincell, td.maincell {
      background: var(--mainCellColor);
      color: #fff;
      font-weight: bold;
      text-align: center;
      font-size: 1em;
    }
    td.cellsecond, th.cellsecond {
      background: var(--cellSecondColor);
      color: #222;
      font-weight: bold;
    }
    th, td {
      background: var(--cellBackground);
      color: var(--mainFontColor);
    }
    th {
      font-weight: bold;
      background: var(--cellBackground);
      color: var(--mainFontColor);
      min-width: 140px;
    }
    .disclaimer {
      font-size: 0.89em;
      color: #888;
      margin-top: 36px;
      line-height: 1.45;
    }
    @media (max-width: 820px) {
      .container { padding: 4vw 2vw; }
      table, th, td { font-size: 0.98em; }
      .top-block { flex-direction: column; align-items: stretch; }
      .lo-card { align-items: flex-start; margin-top: 10px;}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-block">
      <div class="logo-block">
        <img id="brandLogo" src="" alt="Logo" />
        <div class="company" id="brandCompanyName">Brand Company Name</div>
      </div>
      <div class="lo-card">
        <img id="loPhoto" class="lo-photo" src="" alt="LO Photo" />
        <div class="lo-info">
          <div class="name" id="loFullName">LO Full Name</div>
          <div id="loEmail">LO Email</div>
          <div id="loPhone">LO Phone</div>
        </div>
      </div>
    </div>
    <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
      <div>Address: <span id="loAddress">LO Address</span></div>
      <div>nmls: <span id="nmls">nmls</span> | DRE: <span id="dre">dre</span></div>
    </div>
    <div class="greeting" id="greeting">Hi Full Name CoBorrower Full Name!</div>
    <div>Welcome to your personal rate & closing cost worksheet. Here you can compare your different loan, rate, and closing cost options. I am here to help you in any way to make the best decision for your goals. Please don't hesitate to contact me with questions.</div>
    <div class="big-title">RATE & CLOSING COST OPTIONS</div>
    <table>
      <tr>
        <th class="maincell">Programs</th>
        <th class="maincell">Program 1</th>
      </tr>
      <tr><th>Appraised Value</th><td id="appraisedValue1"></td></tr>
      <tr><th>Loan Amount</th><td id="loanAmount1"></td></tr>
      <tr><th>Equity</th><td id="equity1"></td></tr>
      <tr><th>Loan-To-Value</th><td id="loanToValue1"></td></tr>
      <tr>
        <th class="cellsecond">Rate</th>
        <td class="cellsecond" id="rate1"></td>
      </tr>
      <tr><th>APR</th><td id="apr1"></td></tr>
      <tr><th>Term</th><td id="term1"></td></tr>
      <tr><th>Principle & Interest</th><td id="pi1"></td></tr>
      <tr><th>Hazard Insurance</th><td id="hazardInsurance1"></td></tr>
      <tr><th>Mortgage Insurance</th><td id="mortgageInsurance1"></td></tr>
      <tr><th>HOA</th><td id="hoa1"></td></tr>
      <tr><th>Property Taxes</th><td id="propertyTaxes1"></td></tr>
      <tr><th>Extra Monthly Payment</th><td id="extraMonthlyPayment1"></td></tr>
      <tr>
        <th class="cellsecond">Total Monthly Payment</th>
        <td class="cellsecond" id="totalMonthlyPayment1"></td>
      </tr>
      <tr><th>Points</th><td id="points1"></td></tr>
      <tr><th>Lender Credit</th><td id="discountPoint1"></td></tr>
      <tr><th>Lender Fees</th><td id="lenderFees1"></td></tr>
      <tr><th>3rd Party Fees</th><td id="thirdPartyFees1"></td></tr>
      <tr>
        <th class="cellsecond">Total Closing Costs</th>
        <td class="cellsecond" id="closingCosts1"></td>
      </tr>
      <tr><th>Escrows & Prepaid Interest</th><td id="escrowsAndPrepaid1"></td></tr>
      <tr>
        <th class="cellsecond">Estimated Total Cash to Close</th>
        <td class="cellsecond" id="cashToClose1"></td>
      </tr>
      <tr>
        <th class="maincell">Closing Costs Included in Loan</th>
        <td class="maincell" id="closingCostsInLoan1"></td>
      </tr>
      <tr><th>Pre-Paids and Impounds in Loan</th><td id="prepaidsInLoan1"></td></tr>
      <tr>
        <th class="cellsecond">Payment Savings</th>
        <td class="cellsecond" id="paymentSavings1"></td>
      </tr>
      <tr><th>Power Refi Savings</th><td id="powerRefiSavings1"></td></tr>
      <tr><th>Interest Saved over 5 Years</th><td id="interestSaved5Years1"></td></tr>
      <tr><th>Interest Saved over Life of Loan</th><td id="interestSavedLife1"></td></tr>
    </table>
    <div class="disclaimer">
      The results provided above are intended for comparison purposes only and accuracy is not guaranteed. The loan comparison does not ensure the availability of, or your eligibility for, any specific product offered by any particular lender and/or is not a commitment to lend. Rates are subject to change based off credit score. The APR is estimated. Lender closing cost credits are not guaranteed and can change without notice.
    </div>
  </div>
  <script>
    // Получаем id из ссылки (?id=test)
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');
    function setText(id, text) {
      const el = document.getElementById(id);
      if (el) el.textContent = text ?? "-";
    }
    function setImg(id, url, fallback) {
      const el = document.getElementById(id);
      if (el) el.src = url || fallback || "";
    }
    if (!id) {
      setText('program1', "Нет ID в ссылке");
    } else {
      fetch(`data/${id}.json`)
        .then(resp => {
          if (!resp.ok) throw new Error("Not found");
          return resp.json();
        })
        .then(data => {
          // Динамические цвета
          if (data.mainCellColor) document.documentElement.style.setProperty('--mainCellColor', data.mainCellColor);
          if (data.cellBackground) document.documentElement.style.setProperty('--cellBackground', data.cellBackground);
          if (data.cellSecondColor) document.documentElement.style.setProperty('--cellSecondColor', data.cellSecondColor);
          if (data.brandFontColor) document.documentElement.style.setProperty('--brandFontColor', data.brandFontColor);
          if (data.mainFontColor) document.documentElement.style.setProperty('--mainFontColor', data.mainFontColor);

          // Картинки
          setImg('brandLogo', data.logoUrl, 'https://dummyimage.com/200x40/ddd/222&text=Logo');
          setImg('loPhoto', data.loPhotoUrl, 'https://dummyimage.com/54x54/ccc/666&text=LO');

          // Тексты
          setText('brandCompanyName', data.brandCompanyName);
          setText('loFullName', data.loFullName);
          setText('loAddress', data.loAddress);
          setText('loEmail', data.loEmail);
          setText('loPhone', data.loPhone);
          setText('nmls', data.nmls);
          setText('dre', data.dre);
          setText('greeting', data.greeting || `Hi ${data.fullName}${data.coBorrowerFullName ? ' & ' + data.coBorrowerFullName : ''}!`);

          setText('appraisedValue1', data.appraisedValue1);
          setText('loanAmount1', data.loanAmount1);
          setText('equity1', data.equity1);
          setText('loanToValue1', data.loanToValue1);
          setText('rate1', data.rate1);
          setText('apr1', data.apr1);
          setText('term1', data.term1);
          setText('pi1', data.pi1);
          setText('hazardInsurance1', data.hazardInsurance1);
          setText('mortgageInsurance1', data.mortgageInsurance1);
          setText('hoa1', data.hoa1);
          setText('propertyTaxes1', data.propertyTaxes1);
          setText('extraMonthlyPayment1', data.extraMonthlyPayment1);
          setText('totalMonthlyPayment1', data.totalMonthlyPayment1);
          setText('points1', data.points1);
          setText('discountPoint1', data.discountPoint1);
          setText('lenderFees1', data.lenderFees1);
          setText('thirdPartyFees1', data.thirdPartyFees1);
          setText('closingCosts1', data.closingCosts1);
          setText('escrowsAndPrepaid1', data.escrowsAndPrepaid1);
          setText('cashToClose1', data.cashToClose1);
          setText('closingCostsInLoan1', data.closingCostsInLoan1);
          setText('prepaidsInLoan1', data.prepaidsInLoan1);
          setText('paymentSavings1', data.paymentSavings1);
          setText('powerRefiSavings1', data.powerRefiSavings1);
          setText('interestSaved5Years1', data.interestSaved5Years1);
          setText('interestSavedLife1', data.interestSavedLife1);
        })
        .catch(() => {
          setText('program1', "Данные не найдены или ссылка устарела!");
        });
    }
  </script>
</body>
</html>
