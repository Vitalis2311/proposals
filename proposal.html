<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Refi Proposal</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;700&display=swap');
    :root {
      --mainCellColor: #363636;
      --cellBackground: #f3f3f3;
      --cellSecondColor: #e5ecfb;
      --brandFontColor: #41a100;
      --mainFontColor: #222;
    }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #fff;
      color: var(--mainFontColor);
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 1150px;
      margin: 44px auto 28px auto;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 4px 24px #0002;
      padding: 38px 46px 28px 46px;
    }
    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 18px;
      gap: 20px;
    }
    .logo-box img {
      max-height: 60px;
      background: #fff;
      border-radius: 7px;
    }
    .lo-box {
      display: flex;
      align-items: center;
      gap: 20px;
      min-width: 350px;
    }
    .lo-photo {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid var(--brandFontColor);
      background: #eee;
      box-shadow: 0 2px 6px #0001;
    }
    .lo-info {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      font-size: 1.1em;
      gap: 2px;
    }
    .lo-name {
      font-weight: 700;
      color: var(--brandFontColor);
      font-size: 1.28em;
      margin-bottom: 2px;
    }
    .lo-contacts {
      color: #555;
      font-size: 0.98em;
    }
    .lo-numbers {
      color: #777;
      font-size: 0.95em;
      margin-top: 2px;
    }
    .company {
      font-size: 1.22em;
      font-weight: bold;
      color: var(--brandFontColor);
      margin: 16px 0 2px 0;
      letter-spacing: 1px;
    }
    .lo-address {
      font-size: 0.98em;
      color: #444;
      margin-top: 3px;
      margin-bottom: 12px;
    }
    .greeting {
      margin: 28px 0 18px 0;
      font-size: 1.20em;
      color: var(--brandFontColor);
      font-weight: bold;
      letter-spacing: 0.5px;
    }
    .big-title {
      color: var(--brandFontColor);
      font-size: 1.32em;
      font-weight: bold;
      margin: 0 0 18px 0;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    .section {
      margin: 30px 0 0 0;
    }
    .section-title {
      background: var(--mainCellColor);
      color: #fff;
      font-size: 1.10em;
      font-weight: bold;
      padding: 9px 16px;
      border-radius: 7px 7px 0 0;
      letter-spacing: 0.7px;
      margin-bottom: -6px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      font-size: 1.01em;
      margin-bottom: 14px;
    }
    th, td {
      border: 1px solid #e3e3e3;
      padding: 10px 14px;
      text-align: left;
      background: var(--cellBackground);
      color: var(--mainFontColor);
      vertical-align: middle;
    }
    th.label {
      width: 250px;
      font-weight: 700;
      background: var(--cellBackground);
    }
    td.cellsecond {
      background: var(--cellSecondColor);
      font-weight: 700;
    }
    tr:last-child td {
      border-bottom: 2px solid #e5e5e5;
    }
    .disclaimer {
      font-size: 0.91em;
      color: #888;
      margin-top: 38px;
      line-height: 1.5;
    }
    @media (max-width: 1200px) {
      .container { padding: 3vw 1vw; }
      .header-row { flex-direction: column; gap: 10px; align-items: stretch; }
      .lo-box { min-width: unset; flex-direction: row; }
      .lo-photo { width: 60px; height: 60px; }
    }
    @media (max-width: 700px) {
      .container { padding: 8vw 1vw; }
      .company, .big-title { font-size: 1em; }
      table, th, td { font-size: 0.96em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Шапка -->
    <div class="header-row">
      <div class="logo-box">
        <img id="brandLogo" src="" alt="Logo" />
        <div class="company" id="brandCompanyName"></div>
        <div class="lo-address" id="loAddress"></div>
      </div>
      <div class="lo-box">
        <img id="loPhoto" class="lo-photo" src="" alt="LO Photo" />
        <div class="lo-info">
          <div class="lo-name" id="loFullName"></div>
          <div class="lo-contacts">
            <span id="loEmail"></span><br>
            <span id="loPhone"></span>
          </div>
          <div class="lo-numbers">
            NMLS: <span id="nmls"></span>
            | DRE: <span id="dre"></span>
          </div>
        </div>
      </div>
    </div>
    <!-- Приветствие и заголовок -->
    <div class="greeting" id="greeting"></div>
    <div class="big-title">Rate & Closing Cost Options</div>
    <!-- Loan Info -->
    <div class="section">
      <div class="section-title">Loan Information</div>
      <table>
        <tr><th class="label">Program</th><td id="program1"></td></tr>
        <tr><th class="label">Appraised Value</th><td id="appraisedValue1"></td></tr>
        <tr><th class="label">Loan Amount</th><td id="loanAmount1"></td></tr>
        <tr><th class="label">Equity</th><td id="equity1"></td></tr>
        <tr><th class="label">Loan-To-Value</th><td id="loanToValue1"></td></tr>
      </table>
    </div>
    <!-- Rate & Term -->
    <div class="section">
      <div class="section-title">Rate & Term</div>
      <table>
        <tr><th class="label">Rate</th><td class="cellsecond" id="rate1"></td></tr>
        <tr><th class="label">APR</th><td id="apr1"></td></tr>
        <tr><th class="label">Term</th><td id="term1"></td></tr>
      </table>
    </div>
    <!-- Payments -->
    <div class="section">
      <div class="section-title">Monthly Payments</div>
      <table>
        <tr><th class="label">Principal & Interest</th><td id="pi1"></td></tr>
        <tr><th class="label">Hazard Insurance</th><td id="hazardInsurance1"></td></tr>
        <tr><th class="label">Mortgage Insurance</th><td id="mortgageInsurance1"></td></tr>
        <tr><th class="label">HOA</th><td id="hoa1"></td></tr>
        <tr><th class="label">Property Taxes</th><td id="propertyTaxes1"></td></tr>
        <tr><th class="label">Extra Monthly Payment</th><td id="extraMonthlyPayment1"></td></tr>
        <tr><th class="label">Total Monthly Payment</th><td class="cellsecond" id="totalMonthlyPayment1"></td></tr>
      </table>
    </div>
    <!-- Closing Costs -->
    <div class="section">
      <div class="section-title">Closing Costs</div>
      <table>
        <tr><th class="label">Points</th><td id="points1"></td></tr>
        <tr><th class="label">Lender Credit</th><td id="discountPoint1"></td></tr>
        <tr><th class="label">Lender Fees</th><td id="lenderFees1"></td></tr>
        <tr><th class="label">3rd Party Fees</th><td id="thirdPartyFees1"></td></tr>
        <tr><th class="label">Total Closing Costs</th><td class="cellsecond" id="closingCosts1"></td></tr>
      </table>
    </div>
    <!-- Final Calculations -->
    <div class="section">
      <div class="section-title">Final Calculations</div>
      <table>
        <tr><th class="label">Escrows & Prepaid Interest</th><td id="escrowsAndPrepaid1"></td></tr>
        <tr><th class="label">Estimated Total Cash to Close</th><td class="cellsecond" id="cashToClose1"></td></tr>
        <tr><th class="label">Closing Costs Included in Loan</th><td id="closingCostsInLoan1"></td></tr>
        <tr><th class="label">Pre-Paids and Impounds in Loan</th><td id="prepaidsInLoan1"></td></tr>
        <tr><th class="label">Payment Savings</th><td id="paymentSavings1"></td></tr>
        <tr><th class="label">Power Refi Savings</th><td id="powerRefiSavings1"></td></tr>
        <tr><th class="label">Interest Saved over 5 Years</th><td id="interestSaved5Years1"></td></tr>
        <tr><th class="label">Interest Saved over Life of Loan</th><td id="interestSavedLife1"></td></tr>
      </table>
    </div>
    <!-- Disclaimer -->
    <div class="disclaimer">
      The results provided above are intended for comparison purposes only and accuracy is not guaranteed. The loan comparison does not ensure the availability of, or your eligibility for, any specific product offered by any particular lender and/or is not a commitment to lend. Rates are subject to change based off credit score. The APR is estimated. Lender closing cost credits are not guaranteed and can change without notice.
    </div>
  </div>
  <script>
    // --- Colors and dynamic content ---
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');
    function setText(id, text) {
      const el = document.getElementById(id);
      if (el) el.textContent = text ?? "-";
    }
    function setImg(id, url, fallback) {
      const el = document.getElementById(id);
      if (el) el.src = url || fallback || "";
    }
    if (!id) {
      setText('program1', "Нет ID в ссылке");
    } else {
      fetch(`data/${id}.json`)
        .then(resp => {
          if (!resp.ok) throw new Error("Not found");
          return resp.json();
        })
        .then(data => {
          // --- Цвета ---
          if (data.mainCellColor) document.documentElement.style.setProperty('--mainCellColor', data.mainCellColor);
          if (data.cellBackground) document.documentElement.style.setProperty('--cellBackground', data.cellBackground);
          if (data.cellSecondColor) document.documentElement.style.setProperty('--cellSecondColor', data.cellSecondColor);
          if (data.brandFontColor) document.documentElement.style.setProperty('--brandFontColor', data.brandFontColor);
          if (data.mainFontColor) document.documentElement.style.setProperty('--mainFontColor', data.mainFontColor);

          // --- Картинки ---
          setImg('brandLogo', data.logoUrl, 'https://dummyimage.com/200x40/ddd/222&text=Logo');
          setImg('loPhoto', data.loPhotoUrl, 'https://dummyimage.com/54x54/ccc/666&text=LO');

          // --- LO данные ---
          setText('brandCompanyName', data.brandCompanyName);
          setText('loFullName', data.loFullName);
          setText('loAddress', data.loAddress);
          setText('loEmail', data.loEmail);
          setText('loPhone', data.loPhone);
          setText('nmls', data.nmls);
          setText('dre', data.dre);
          setText('greeting', data.greeting || `Hi ${data.fullName}${data.coBorrowerFullName ? ' & ' + data.coBorrowerFullName : ''}!`);

          // --- Loan Info секция ---
          setText('program1', data.program1);
          setText('appraisedValue1', data.appraisedValue1);
          setText('loanAmount1', data.loanAmount1);
          setText('equity1', data.equity1);
          setText('loanToValue1', data.loanToValue1);

          // --- Rate & Term ---
          setText('rate1', data.rate1);
          setText('apr1', data.apr1);
          setText('term1', data.term1);

          // --- Payments ---
          setText('pi1', data.pi1);
          setText('hazardInsurance1', data.hazardInsurance1);
          setText('mortgageInsurance1', data.mortgageInsurance1);
          setText('hoa1', data.hoa1);
          setText('propertyTaxes1', data.propertyTaxes1);
          setText('extraMonthlyPayment1', data.extraMonthlyPayment1);
          setText('totalMonthlyPayment1', data.totalMonthlyPayment1);

          // --- Closing Costs ---
          setText('points1', data.points1);
          setText('discountPoint1', data.discountPoint1);
          setText('lenderFees1', data.lenderFees1);
          setText('thirdPartyFees1', data.thirdPartyFees1);
          setText('closingCosts1', data.closingCosts1);

          // --- Final Calculations ---
          setText('escrowsAndPrepaid1', data.escrowsAndPrepaid1);
          setText('cashToClose1', data.cashToClose1);
          setText('closingCostsInLoan1', data.closingCostsInLoan1);
          setText('prepaidsInLoan1', data.prepaidsInLoan1);
          setText('paymentSavings1', data.paymentSavings1);
          setText('powerRefiSavings1', data.powerRefiSavings1);
          setText('interestSaved5Years1', data.interestSaved5Years1);
          setText('interestSavedLife1', data.interestSavedLife1);
        })
        .catch(() => {
          setText('program1', "Данные не найдены или ссылка устарела!");
        });
    }
  </script>
</body>
</html>
